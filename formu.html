<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Innovaciones en Tecnología de PC</title>
    <link rel="stylesheet" href="cssprinci.css"> 
    <link rel="stylesheet" href="cssformulario.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>


</head>
<body>
    <section id="navegacion" class="navegacion">
        <nav class="navbar">
            <div class="logo">
                <a href="index.html">
                    <img src="https://res.cloudinary.com/dh3vrki7m/image/upload/v1731462103/2_qyazdq.png" alt="Logo de Tienda de PC">
                </a>
            </div>
            <div class="nombrelogo">
            </div>
            <ul>
                <li><a style="font-size: 25px; font-weight: 700;" href="index.html"><i>Inicio</i></a></li>  <!-- funcional -->
                <li><a style="font-size: 25px; font-weight: 700;"  href="novedades.html"><i>Novedades</i></a></li>
                <li>
                    <a style="font-size: 25px; font-weight: 700;"  href="welcometop.html"><i>Ranking</i></a>
                    <div class="dropdown-content">
                        <div class="submenu">
                            <a style="font-size: 25px; font-weight: 700;"  href="#">Procesadores</a>
                            <div class="submenu-content">
                                <a style="font-size: 25px; font-weight: 700;"  href="topintel.html">Intel</a>
                                <a  style="font-size: 25px; font-weight: 700;"  href="topamd.html">AMD</a>
                            </div>
                        </div>
                        <div class="submenu">
                            <a style="font-size: 25px; font-weight: 700;"href="#">Tarjetas Gráficas</a>
                            <div class="submenu-content">
                                <a style="font-size: 25px; font-weight: 700;"  href="topnvidia.html">NVIDIA</a>
                                <a style="font-size: 25px; font-weight: 700;"  href="topradeon.html">RADEON</a>
                            </div>
                        </div>
                        <div class="submenu">
                            <a style="font-size: 25px; font-weight: 700;"  href="#">Laptops</a>
                            <div class="submenu-content">
                                <a style="font-size: 25px; font-weight: 700;" href="toplaptopgamer.html">Gamers</a>
                            </div>
                        </div>
                    </div>
                </li>
                <li><a style="font-size: 25px; font-weight: 700;"  href="armapc.html"><i>Arma tu pc</i></a></li>
                <li><a style="font-size: 25px; font-weight: 700;"   href="contacto.html"><i>Contacto</i></a></li>
            </ul>
        </nav>
    </section>
    <div class="container">
        <h1>Contacto</h1>
        <p>Si tienes dudas, sugerencias o necesitas más información sobre tecnología de PC, completa el formulario y recibirás una respuesta en el menor tiempo posible.</p>
        
        <form id="contact-form" method="POST" onsubmit="mostrarConfirmacion(event)"onsubmit>
            <label for="nombre">Nombres:</label>
            <input type="text" id="nombre" name="nombre" placeholder="Tus nombres" required>
            
            <label for="apellidop">Apellido Paterno:</label>
            <input type="text" id="apellidop" name="apellidop" placeholder="Apellido paterno" required>
            
            <label for="apellidom">Apellido Materno:</label>
            <input type="text" id="apellidom" name="apellidom" placeholder="Apellido materno" required>
            
            <label for="correo">Correo Electrónico:</label>
            <input type="email" id="correo" name="correo" placeholder="Tu correo electrónico" required>
            
            <label for="telefono">Teléfono:</label>
            <input type="tel" id="telefono" name="telefono" placeholder="Número de teléfono">
            
            <label for="tipo_consulta">Selecciona el Tipo de Consulta:</label>
            <select id="tipo_consulta" name="tipo_consulta" required>
                <option value="" disabled selected>Selecciona una opción</option>
                <option value="soporte">Soporte Técnico</option>
                <option value="informacion">Información General</option>
                <option value="sugerencia">Sugerencia</option>
                <option value="otro">Otro</option>
            </select>
            
            <label for="mensaje">Mensaje:</label>
            <textarea id="mensaje" name="mensaje" placeholder="Escribe aquí tu mensaje" rows="6" required></textarea>
            
            <button type="submit">Enviar Mensaje</button>
        </form>
        
        </form>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        function mostrarConfirmacion(event) {
            event.preventDefault(); // Evita el envío del formulario por defecto
            console.log("Formulario enviado"); // Mensaje de depuración
        
            // Envía el formulario de forma manual con AJAX
            const form = document.getElementById('contact-form');
            const formData = new FormData(form);
        
            fetch('guardar_consulta.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(result => {
                console.log(result); // Verifica la respuesta del servidor
                // Si el resultado indica un error, mostrar un mensaje de error
                if (result.includes("Error") || result.includes("fallado") || result.includes("debe ser completado")) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: result, // Muestra el mensaje de error devuelto por el servidor
                        confirmButtonText: 'Cerrar'
                    });
                } else {
                    // Muestra un modal de confirmación con SweetAlert2
                    Swal.fire({
                        icon: 'success',
                        title: 'Mensaje enviado correctamente',
                        text: 'Serás redirigido al inicio en unos momentos...',
                        showConfirmButton: false,
                        timer: 5000,
                        willClose: () => {
                            window.location.href = 'index.html'; // Cambia 'index.html' a la página de inicio deseada
                        }
                    });
                }
            })
            .catch(error => {
                console.error('Error al enviar el formulario:', error);
                // Muestra un mensaje de error en caso de que la solicitud falle
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'No se pudo enviar el formulario. Intenta de nuevo más tarde.',
                    confirmButtonText: 'Cerrar'
                });
            });
        }
        </script>
         <script>
            (function() {
                // Inicializar EmailJS con tu Public Key
                emailjs.init("I5NVhgde2QRkfIxht");
    
                document.getElementById('contact-form').addEventListener('submit', function(event) {
                    event.preventDefault();
    
                    // Preparar los datos del formulario
                    const templateParams = {
                        nombre: document.getElementById('nombre').value,
                        apellidop: document.getElementById('apellidop').value,
                        apellidom: document.getElementById('apellidom').value,
                        correo: document.getElementById('correo').value,
                        telefono: document.getElementById('telefono').value,
                        tipo_consulta: document.getElementById('tipo_consulta').value,
                        mensaje: document.getElementById('mensaje').value
                    };
    
                    // Enviar el email usando EmailJS
                    emailjs.send('service_lq2bkgo', 'template_mosduuc', templateParams)
                        .then(function(response) {
                            console.log('SUCCESS!', response.status, response.text);
                            document.getElementById('mensaje-exito').style.display = 'block';
                            document.getElementById('contact-form').reset();
                        }, function(error) {
                            console.log('FAILED...', error);
                            alert('Error al enviar el mensaje. Por favor, intenta nuevamente.');
                        });
                });
            })();
            
        </script>
</body>
</html>
